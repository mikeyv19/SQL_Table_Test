<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=3000px" />
    <title>Weekly Plan</title>

    <script
      src="https://code.jquery.com/jquery-3.4.1.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.10/js/select2.full.js"></script>
    <link
      href="{{ url_for('static', filename='css/weekly_style_new.css') }}"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/bs-non-responsive.css') }}"
      rel="stylesheet"
    />
    <link
      href="{{ url_for('static', filename='css/non-responsive.css') }}"
      rel="stylesheet"
    />
  </head>

  <body>
    {% include 'navbar-no-response.html' %}
    <br />
    <div class="container-table">
      <form method="POST">
        {{ form.hidden_tag() }}{{ form.rqty(class="half-box-form") }}x
        {{form.name(class="full-box-form", id="recipe") }}
        <br> Servings (for 1x): <span id="dynamic"></span>
        <br />{{form.day(class="full-box-form") }} <br />{{
        form.submit(class="btn btn-secondary")}} 
        <div id="dynamic"></div>
        <br>
      </form>
      <div class="row">
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Monday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for mm in monday_meals %}
                <td>
                  {{'%0.01f'|format(mm.qty|float)}}x {{mm.rname}} ({{mm.servings}}) Servings <a href="{{url_for('delete_weekly_item', id =mm.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Tuesday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for tm in tuesday_meals %}
                <td>
                  {{'%0.01f'|format(tm.qty|float)}}x {{tm.rname}} <a href="{{url_for('delete_weekly_item', id =tm.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Wednesday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for wm in wednesday_meals %}
                <td>
                  {{'%0.01f'|format(wm.qty|float)}}x {{wm.rname}} <a href="{{url_for('delete_weekly_item', id =wm.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Thursday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for thm in thursday_meals %}
                <td>
                  {{'%0.01f'|format(thm.qty|float)}}x {{thm.rname}} <a href="{{url_for('delete_weekly_item', id =thm.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Friday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for fm in friday_meals %}
                <td>
                  {{'%0.01f'|format(fm.qty|float)}}x {{fm.rname}} <a href="{{url_for('delete_weekly_item', id =fm.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Saturday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for sam in saturday_meals %}
                <td>
                  {{'%0.01f'|format(sam.qty|float)}}x {{sam.rname}} <a href="{{url_for('delete_weekly_item', id =sam.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Sunday Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for sum in sunday_meals %}
                <td>
                  {{'%0.01f'|format(sum.qty|float)}}x {{sum.rname}} <a href="{{url_for('delete_weekly_item', id =sum.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Extra Meals:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for em in extra_meals %}
                <td>
                  {{'%0.01f'|format(em.qty|float)}}x {{em.rname}} <a href="{{url_for('delete_weekly_item', id =em.id)}}">Delete</a>
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
      <br>
      <div class="row">
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Monday Ingredients:</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                {% for mi in monday_ingredients %}
                <td>
                  {{'%0.01f'|format(mi.total|float)}} {{mi.unit_name}} x
                  {{mi.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Tuesday Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for tui in tuesday_ingredients %}
                <td>{{tui.qty}} {{tui.unit_name}} x {{tui.ingredient_name}}</td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Wednesday Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for wi in wednesday_ingredients %}
                <td>
                  {{'%0.01f'|format(wi.total|float)}} {{wi.unit_name}} x
                  {{wi.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Thursday Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for thi in thursday_ingredients %}
                <td>
                  {{'%0.01f'|format(thi.total|float)}} {{thi.unit_name}} x
                  {{thi.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Friday Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for fi in friday_ingredients %}
                <td>
                  {{'%0.01f'|format(fi.total|float)}} {{fi.unit_name}} x
                  {{fi.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Saturday Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for sai in saturday_ingredients %}
                <td>
                  {{'%0.01f'|format(sai.total|float)}} {{sai.unit_name}} x
                  {{sai.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Sunday Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for sui in sunday_ingredients %}
                <td>
                  {{'%0.01f'|format(sui.total|float)}} {{sui.unit_name}} x
                  {{sui.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
        <div class="column">
          <table class="table table-hover table-bordered table-striped">
            <thead>
              <tr>
                <th>Extra Ingredients:</th>
              </tr>
            </thead>

            <tbody>
              <tr>
                {% for ei in extra_ingredients %}
                <td>
                  {{'%0.01f'|format(ei.total|float)}} {{ei.unit_name}} x
                  {{ei.ingredient_name}}
                </td>
              </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
    <script>
      $(document).ready(function () {
        $("#recipe").select2({
          placeholder: "{{ form.name.label.text }}",
          allowClear: true,
          width: "150px",
        });
        $("#recipe").change(function () {
        $.ajax({
          type: "POST",
          url: "/serving_label_update",
          dataType: "json",
          data: JSON.stringify(
            $("#select2-recipe-container").attr("title")
          ),
          contentType: "application/json;charset=UTF-8",
          success: function (data) {
            document.getElementById("dynamic").innerHTML = data;
          },
        });
      });
      });
    </script>
  </body>
</html>
